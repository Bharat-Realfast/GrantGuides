<template>
  <lightning-quick-action-panel header={displayTitle}>
    <div>
        <lightning-card title={displayTitle} icon-name="utility:builder">
            <lightning-button-group slot="actions">
              <lightning-button label="Reorder" onclick={reorderSections}></lightning-button>
              <lightning-button label="Export" onclick={exportGrantVFPdf}></lightning-button>
            </lightning-button-group>
    
            <template for:each={sections} for:item="sec">
              <!-- DRAG DROP NOT USED
              <div key={sec.value} ondragover={allowDrop} ondrop={drop}>  

              <div key={sec.value} id={sec.value} draggable="true" ondragstart={drag}>
                  INSERT CODE here
              </div>  
              </div>

              -->
                <c-ggw-section
                    section-title={sec.label}
                    text-block={sec.textblock}
                    section-id={sec.value}
                    section-has-blocks={sec.hasblocks}
                    application-id={sec.appid}
                    selected-item-id={sec.selecteditem}
                    sectioncount={sec.sectioncount}
                    sortorder={sec.sortorder}
                    onselectedtext={hanldeSelectedTextChange}
                    ondeletesection={handleDeleteSection}
                    key={sec.value}
                ></c-ggw-section>
            </template>
            
        </lightning-card>
    </div>

    <div slot="footer">
      <lightning-button variant="neutral" label="Close" onclick={closeModal}></lightning-button>
      <lightning-button variant="brand" label="Save" onclick={updateGrant} class="slds-m-left_x-small"></lightning-button>
    </div>
  </lightning-quick-action-panel>

  <!-- Display Reorder sections MOdal -->
  <template if:true={openModal}>  
    <!------Body Section-->
    <div class="slds-modal slds-fade-in-open slds-backdrop">  
      <div class="slds-modal__container">  
        <div class="slds-modal__content slds-p-around_medium">  
            <center>  
                <c-ggw-order-sections
                  record-id={recordId}
                  onsectionorderchange={handleSectionOrderChange}
                ></c-ggw-order-sections>
            </center>  
        </div>  
        <!------Footer Section 
          <div class="slds-modal__footer">  
          <lightning-button icon-name="utility:save" label="Reorder" onclick={saveCloseModal}></lightning-button>
          <lightning-button icon-name="utility:close" label="Cancel" variant="brand" onclick={closeModal}></lightning-button>  
        </div>  
        -->
      </div>  
    </div>  
  </template>      
  <!-- END REORDER Section Modal -->

  <!-- Display EXPORT VFP PDF Mdal -->
  <template if:true={openVFPExportModal}>  
    <div role="dialog" tabindex="-1" aria-labelledby="header43" aura:id="Modalbox" class="slds-modal slds-modal_large">
      <div class="slds-modal__container" style="width: 40%;">
          <div class="slds-modal__header">
              <p>Grant Details</p>
          </div>
          <div class="slds-modal__content slds-p-around--medium">  
              <iframe src={grantPageURL} width="100%" height="500px;" frameborder="0"></iframe>
          </div>
          <div class="slds-modal__footer">
              <lightning:button label="Close" onclick={closePDFModal}></lightning:button>
          </div>
      </div>
    </div>
  </template>
  <!-- Display EXPORT VFP PDF Mdal -->

</template>